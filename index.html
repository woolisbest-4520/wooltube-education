<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wool-Tube (Education)</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#000066; min-height:100vh; padding:20px; transition:background 0.3s; }
        body.light-mode { background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); }
        .container { max-width:1200px; margin:0 auto; }
        h1 { color:white; text-align:center; margin-bottom:30px; font-size:2.5em; text-shadow:2px 2px 4px rgba(0,0,0,0.3); display:flex; align-items:center; justify-content:center; gap:15px; }
        .logo { width:80px; height:80px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:45px; box-shadow:0 5px 15px rgba(0,0,0,0.3); animation:float 3s ease-in-out infinite; }
        @keyframes float { 0%,100%{transform:translateY(0px);} 50%{transform:translateY(-10px);} }
        .search-box { background: linear-gradient(135deg,#4a0e34 0%,#2d1b3d 100%); padding:30px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3); margin-bottom:30px; transition:background 0.3s; }
        body.light-mode .search-box { background:white; }
        .input-group { display:flex; gap:10px; margin-bottom:15px; }
        input[type="text"] { flex:1; padding:15px; border:2px solid rgba(255,255,255,0.3); border-radius:8px; font-size:16px; transition:border-color 0.3s, background 0.3s; background:#000; color:white; }
        body.light-mode input[type="text"] { background:white; color:#333; border:2px solid #e0e0e0; }
        input[type="text"]::placeholder { color:rgba(255,255,255,0.5); }
        body.light-mode input[type="text"]::placeholder { color:rgba(0,0,0,0.5); }
        input[type="text"]:focus { outline:none; border-color:#7b1fa2; background:#1a1a1a; }
        body.light-mode input[type="text"]:focus { background:#f9f9f9; border-color:#7b1fa2; }
        button { padding:15px 30px; background:linear-gradient(135deg,#7b1fa2 0%,#4a148c 100%); color:white; border:none; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s; }
        button:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(123,31,162,0.5); }
        button:active { transform:translateY(0); }
        .player-section { background:white; padding:30px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3); margin-bottom:30px; }
        #player { width:100%; aspect-ratio:16/9; border-radius:10px; background:#000; }
        #playerContainer { width:100%; aspect-ratio:16/9; border-radius:10px; overflow:hidden; background:#000; }
        .controls { display:flex; gap:10px; margin-top:15px; flex-wrap:wrap; }
        .controls button { flex:1; min-width:120px; }
        .results { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; }
        .video-card { background:white; border-radius:10px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.2); cursor:pointer; transition: transform 0.3s, box-shadow 0.3s; }
        .video-card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,0.3); }
        .video-card img { width:100%; height:180px; object-fit:cover; }
        .video-info { padding:15px; }
        .video-title { font-weight:bold; margin-bottom:8px; font-size:14px; line-height:1.4; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
        .video-channel { color:#666; font-size:12px; }
        .loading { text-align:center; color:white; font-size:18px; margin:20px 0; }
        .error { background:#ff5252; color:white; padding:15px; border-radius:8px; margin-bottom:20px; }
        .info { background:#4CAF50; color:white; padding:15px; border-radius:8px; margin-bottom:20px; }
        #currentVideo { text-align:center; margin-bottom:15px; font-size:18px; font-weight:bold; color:#333; }
        .stream-url { margin-top:15px; padding:10px; background:#f5f5f5; border-radius:5px; font-size:12px; word-break:break-all; }
        .api-note { font-size:12px; color:rgba(255,255,255,0.9); margin-top:10px; transition: color 0.3s; }
        body.light-mode .api-note { color:#666; }
        .theme-toggle { position:fixed; top:20px; right:20px; background:rgba(255,255,255,0.2); border:none; width:50px; height:50px; border-radius:50%; cursor:pointer; font-size:24px; display:flex; align-items:center; justify-content:center; transition:all 0.3s; box-shadow:0 4px 10px rgba(0,0,0,0.3); z-index:1000; }
        .theme-toggle:hover { transform:scale(1.1); background:rgba(255,255,255,0.3); }
        body.light-mode .theme-toggle { background:rgba(0,0,0,0.1); }
        body.light-mode .theme-toggle:hover { background:rgba(0,0,0,0.2); }
        select { appearance:none; background-repeat:no-repeat; background-position:right 15px center; padding-right:40px; cursor:pointer; }
        body.light-mode select { background-color:white; color:#333; border:2px solid #e0e0e0; }
        select:focus { outline:none; border-color:#7b1fa2; background-color:#1a1a1a; }
        body.light-mode select:focus { background-color:#f9f9f9; }
        select option { background:#000; color:white; padding:10px; }
        body.light-mode select option { background:white; color:#333; }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">üåô</button>
    
    <div class="container">
        <h1>
            <div class="logo">üêë</div>
            Wool-Tube (Education)
        </h1>
        
        <div class="search-box">
            <div class="input-group">
                <select id="paramSourceSelect">
                    <option value="parameter.txt">woolisbest 1</option>
                    <option value="edu.txt">woolisbest 2</option>
                    <option value="ep.txt">woolisbest 3</option>
                    <option value="video_config.json">Âπ∏„Åõok</option>
                </select>
            </div>
            <div class="input-group">
                <select id="apiKeySelect">
                    <option value="">YouTube Data API Key „ÇíÈÅ∏ÊäûÔºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ</option>
                    <option value="AIzaSyCz7f0X_giaGyC9u1EfGZPBuAC9nXiL5Mo">API Key 1</option>
                    <option value="AIzaSyBmzCw7-sX1vm-uL_u2Qy3LuVZuxye4Wys">API Key 2</option>
                    <option value="AIzaSyBWScla0K91jUL6qQErctN9N2b3j9ds7HI">API Key 3</option>
                    <option value="AIzaSyA17CdOQtQRC3DQe7rgIzFwTUjwAy_3CAc">API Key 4</option>
                    <option value="AIzaSyDdk_yY0tN4gKsm4uyMYrIlv1RwXIYXrnw">API Key 5</option>
                    <option value="custom">„Ç´„Çπ„Çø„É†API„Ç≠„Éº„ÇíÂÖ•Âäõ...</option>
                </select>
            </div>
            <div class="input-group" id="customKeyInput" style="display:none;">
                <input type="text" id="apiKey" placeholder="„Ç´„Çπ„Çø„É†Google API Key„ÇíÂÖ•Âäõ">
            </div>
            <div class="input-group">
                <input type="text" id="searchQuery" placeholder="Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„Åæ„Åü„ÅØYouTube URL„ÇíÂÖ•Âäõ" onkeypress="if(event.key==='Enter') searchVideos()">
                <button onclick="searchVideos()">üîç Ê§úÁ¥¢</button>
            </div>
            <div class="api-note">
                üìö YouTube Education „É¢„Éº„Éâ„ÅßÂÜçÁîü„Åó„Åæ„Åô<br>
                ‚Äª„Éë„É©„É°„Éº„Çø„ÇΩ„Éº„Çπ„ÇíÈÅ∏Êäû„Åó„Å¶„ÄÅÊïôËÇ≤Áî®„ÅÆÊúÄÈÅ©Âåñ„Åï„Çå„ÅüÂüã„ÇÅËæº„Åø„Éó„É¨„Éº„É§„Éº„Çí‰ΩøÁî®
            </div>
        </div>

        <div class="player-section" id="playerSection" style="display:none;">
            <div id="currentVideo"></div>
            <div id="playerContainer">
                <iframe id="player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="controls">
                <button onclick="toggleLoop()" id="btnLoop">üîÅ „É™„Éî„Éº„Éà: OFF</button>
            </div>
            <div class="stream-url" id="streamUrl"></div>
        </div>

        <div id="loading" class="loading" style="display:none;">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
        <div id="error" class="error" style="display:none;"></div>
        <div id="info" class="info" style="display:none;"></div>
        
        <div class="results" id="results"></div>
    </div>

    <script>
        let currentVideoId = null;
        let isLoopEnabled = false;
        let educationParams = {};

        async function loadEducationParams() {
            const paramSource = document.getElementById('paramSourceSelect').value;
            if (educationParams[paramSource] !== undefined) return educationParams[paramSource];

            try {
                let url;
                if (paramSource === 'edu.txt') url = 'https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/edu.txt';
                else if (paramSource === 'ep.txt') url = 'https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/ep.txt';
                else if (paramSource === 'video_config.json') url = 'https://raw.githubusercontent.com/siawaseok3/wakame/master/video_config.json';
                else url = 'https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/parameter.txt';

                const response = await fetch(url);
                if (response.ok) {
                    if (paramSource === 'video_config.json') {
                        const config = await response.json();
                        educationParams[paramSource] = config.params || '';
                    } else {
                        const text = await response.text();
                        educationParams[paramSource] = text.trim();
                    }
                    return educationParams[paramSource];
                } else {
                    educationParams[paramSource] = '';
                    return '';
                }
            } catch (err) {
                educationParams[paramSource] = '';
                return '';
            }
        }

        function toggleLoop() {
            isLoopEnabled = !isLoopEnabled;
            const btnLoop = document.getElementById('btnLoop');
            if (isLoopEnabled) {
                btnLoop.textContent = 'üîÅ „É™„Éî„Éº„Éà: ON';
                btnLoop.style.background = 'linear-gradient(135deg,#4CAF50 0%,#388E3C 100%)';
            } else {
                btnLoop.textContent = 'üîÅ „É™„Éî„Éº„Éà: OFF';
                btnLoop.style.background = 'linear-gradient(135deg,#7b1fa2 0%,#4a148c 100%)';
            }
            applyLoopToCurrentPlayer();
            showInfo(`„É™„Éî„Éº„ÉàÂÜçÁîü„Çí${isLoopEnabled?'ON':'OFF'}„Å´„Åó„Åæ„Åó„Åü`);
        }

        function applyLoopToCurrentPlayer() { if(currentVideoId) playVideo(currentVideoId, document.getElementById('currentVideo').textContent); }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            document.getElementById('themeToggle').textContent = document.body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const apiKeySelect = document.getElementById('apiKeySelect');
            const customKeyInput = document.getElementById('customKeyInput');
            const paramSourceSelect = document.getElementById('paramSourceSelect');

            apiKeySelect.addEventListener('change', function() { customKeyInput.style.display = this.value==='custom'?'flex':'none'; });
            paramSourceSelect.addEventListener('change', function() { showInfo(`„Éë„É©„É°„Éº„Çø„ÇΩ„Éº„Çπ„Çí ${this.value} „Å´Â§âÊõ¥„Åó„Åæ„Åó„Åü`); });
        });

        async function searchVideos() {
            const query = document.getElementById('searchQuery').value.trim();
            const apiKeySelect = document.getElementById('apiKeySelect');
            const customApiKey = document.getElementById('apiKey');
            let apiKey = apiKeySelect.value==='custom'?customApiKey.value.trim():apiKeySelect.value;

            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const info = document.getElementById('info');
            const results = document.getElementById('results');

            error.style.display = info.style.display = 'none';
            results.innerHTML = '';

            if(!query) { showError('Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„Åæ„Åü„ÅØURL„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ'); return; }

            const videoIdMatch = query.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\s]+)/);
            if(videoIdMatch) { playVideo(videoIdMatch[1],'YouTubeÂãïÁîª'); return; }

            loading.style.display='block';
            showInfo('Ê§úÁ¥¢‰∏≠...');

            if(apiKey){
                try{
                    const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(query)}&type=video&key=${apiKey}`,{signal:AbortSignal.timeout(15000)});
                    if(response.ok){
                        const data = await response.json();
                        if(data.items && data.items.length>0){ displayGoogleResults(data.items); loading.style.display='none'; showInfo('‚úÖ YouTube Data API „ÅßÊ§úÁ¥¢„Åó„Åæ„Åó„Åü'); return; }
                    }
                }catch(err){ console.log('YouTube Data API error:',err); }
            }

            const invidiousServers = ['https://inv.perditum.com','https://yewtu.be','https://invidious.privacydev.net'];
            for(const server of invidiousServers){
                try{
                    const response = await fetch(`${server}/api/v1/search?q=${encodeURIComponent(query)}&type=video`,{signal:AbortSignal.timeout(10000)});
                    if(response.ok){
                        const data = await response.json();
                        if(data && Array.isArray(data) && data.length>0){ displayInvidiousResults(data); loading.style.display='none'; showInfo('‚úÖ Ê§úÁ¥¢ÂÆå‰∫Ü'); return; }
                    }
                }catch(err){ continue; }
            }

            displayPopularVideos(query);
            loading.style.display='none';
            showInfo('‚ö†Ô∏è ‰∫∫Ê∞óÂãïÁîª„ÇíË°®Á§∫„Åó„Å¶„ÅÑ„Åæ„Åô');
        }

        function displayPopularVideos(query){
            const results = document.getElementById('results');
            const popularVideos = [
                { id:'dQw4w9WgXcQ', title:'Rick Astley - Never Gonna Give You Up', channel:'Rick Astley' },
                { id:'kJQP7kiw5Fk', title:'Luis Fonsi - Despacito', channel:'Luis Fonsi' },
                { id:'JGwWNGJdvx8', title:'Ed Sheeran - Shape of You', channel:'Ed Sheeran' }
            ];
            popularVideos.forEach(video=>{
                const card=document.createElement('div');
                card.className='video-card';
                card.onclick=()=>playVideo(video.id,video.title);
                card.innerHTML=`<img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${video.title}"><div class="video-info"><div class="video-title">${video.title}</div><div class="video-channel">${video.channel}</div></div>`;
                results.appendChild(card);
            });
        }

        function displayInvidiousResults(items){
            const results = document.getElementById('results');
            items.slice(0,12).forEach(item=>{
                if(!item.videoId) return;
                const videoId = item.videoId;
                const card = document.createElement('div');
                card.className='video-card';
                card.onclick=()=>playVideo(videoId,item.title);
                card.innerHTML=`<img src="https://img.youtube.com/vi/${videoId}/mqdefault.jpg" alt="${item.title||'Video'}"><div class="video-info"><div class="video-title">${item.title||'Untitled Video'}</div><div class="video-channel">${item.author||'Unknown Channel'}</div></div>`;
                results.appendChild(card);
            });
        }

        function displayGoogleResults(items){
            const results=document.getElementById('results');
            items.forEach(item=>{
                const videoId=item.id.videoId;
                const card=document.createElement('div');
                card.className='video-card';
                card.onclick=()=>playVideo(videoId,item.snippet.title);
                const thumbnail=item.snippet.thumbnails.medium.url;
                card.innerHTML=`<img src="${thumbnail}" alt="${item.snippet.title}"><div class="video-info"><div class="video-title">${item.snippet.title}</div><div class="video-channel">${item.snippet.channelTitle}</div></div>`;
                results.appendChild(card);
            });
        }

        async function playVideo(videoId,title){
            const playerSection=document.getElementById('playerSection');
            const currentVideo=document.getElementById('currentVideo');
            const playerContainer=document.getElementById('playerContainer');
            const streamUrl=document.getElementById('streamUrl');

            currentVideoId=videoId;
            playerSection.style.display='block';
            currentVideo.textContent=title;
            playerContainer.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;background:#000;color:#fff;">EducationË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>';
            streamUrl.textContent='EducationË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠...';

            const paramSource=document.getElementById('paramSourceSelect').value;
            const paramsString=await loadEducationParams();

            let finalParams=paramsString;
            if(isLoopEnabled){
                if(finalParams && finalParams.includes('?')) finalParams+=`&loop=1&playlist=${videoId}`;
                else if(finalParams) finalParams=`?${finalParams}&loop=1&playlist=${videoId}`;
                else finalParams=`?loop=1&playlist=${videoId}`;
            }

            const educationUrl=`https://www.youtubeeducation.com/embed/${videoId}${finalParams}`;
            playerContainer.innerHTML=`<iframe id="player" width="100%" height="100%" src="${educationUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            streamUrl.textContent=`üìö YouTube Education (${paramSource}) | Loop: ${isLoopEnabled?'ON':'OFF'}`;
            playerSection.scrollIntoView({behavior:'smooth', block:'start'});
        }

        function showError(msg){ const e=document.getElementById('error'); e.textContent=msg; e.style.display='block'; setTimeout(()=>{e.style.display='none';},5000); }
        function showInfo(msg){ const i=document.getElementById('info'); i.textContent=msg; i.style.display='block'; setTimeout(()=>{i.style.display='none';},3000); }
    </script>

    <div style="margin-top:40px;">
        <img src="https://count.ayaya.beauty/@woolisbest?name=woolisbest&theme=rule34&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto" alt="visitor counter">
    </div>
</body>
</html>
